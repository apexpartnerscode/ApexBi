<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
    </style>
</head>

<body>
    <div id="iframeContainer">
        <iframe title="Campanha 4 Trimestre" width="1140" height="541.25"
            src="https://app.powerbi.com/reportEmbed?reportId=11529854-f268-4b6f-a674-c8a6742d12f5&autoAuth=true&ctid=203bc81b-c25f-4cd3-a09b-6476c30bb289"
            frameborder="0" allowFullScreen="true" id="campanha04">
        </iframe>
    </div>

    <!-- <script src="script.js"></script> -->
    <script>
        // Function to check and click the button inside the iframe
        function checkAndClickButton() {
            const iframe = document.querySelector('iframe#campanha04');
            console.log('iframe: ', iframe)

            if (iframe) {
                const iframeWindow = iframe.contentWindow;

                if (iframeWindow && iframeWindow.document) {
                    const iframeDocument = iframeWindow.document;

                    // Locate the button inside the iframe's document
                    const button = iframeDocument.querySelector('button.bibutton.primary');
                    console.log('button: ', button)

                    if (button) {
                        // Button exists inside the iframe, click it
                        button.click();
                        console.log('Clicked the button inside the iframe.');
                    } else {
                        console.log('Button not found inside the iframe.');
                    }
                } else {
                    console.log('Could not access the iframe content window or document.');
                }
            } else {
                console.log('Iframe not found.');
            }
        }

        // Set an interval to check every 3 minutes (180,000 milliseconds)
        const interval = 180000; // 3 minutes in milliseconds

        // Initial check and click
        checkAndClickButton();

        // Set up the interval with a delay before checking and clicking the button
        setInterval(() => {
            setTimeout(checkAndClickButton, 1000); // Add a 1-second delay before checking
        }, interval);


    </script>
</body>

</html>